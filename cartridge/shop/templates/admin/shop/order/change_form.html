{% extends "admin/change_form.html" %}
{% load shop_tags i18n future %}

{% block extrahead %}{{ block.super }}
<style>
    h2 {margin-top: 20px;}
    .attribute-values {font-weight: normal !important; color: #666; padding-left: 20px;}
</style>
{% endblock %}

{% block object-tools %}
{% if change %}{% if not is_popup %}
<ul class="object-tools">
<li><a href="{% url "shop_invoice" object_id %}?format=pdf">{% trans "Download PDF invoice" %}</a></li>
<li><a href="history/" class="historylink">{% trans "History" %}</a></li>
</ul>
{% endif %}{% endif %}
{% endblock %}

{% block after_field_sets %}
{% with original as order %}
{# Below is a copy from order_details.html. #}
<h2>{% trans "Items Ordered" %}</h2>
<table width="100%" border="1" cellspacing="0" cellpadding="10">
    <tr>
        <th align="left">{% trans "Item" %}</th>
        <th align="right">{% trans "Unit Price" %}</th>
        <th align="right">{% trans "Qty" %}</th>
        <th align="right">{% trans "Price" %}</th>
    </tr>
    {% for item in order.items.all %}
    <tr>
        <td>
            {{ item.description }}
            <ul class="attribute-values">
                {% for value in item.attribute_values.all %}
                <li>{{ value }}</li>
                {% endfor %}
            </ul>
        </td>
        <td align="right" valign="top">{{ item.unit_price|currency }}</td>
        <td align="right" valign="top">{{ item.quantity }}</td>
        <td align="right" valign="top">{{ item.total_price|currency }}</td>
    </tr>
    {% endfor %}
    <tr>
        <td colspan="4" align="right">{% order_totals %}</td>
    </tr>
</table>
{% endwith %}
{% endblock %}
